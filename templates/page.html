<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>{{ scheme_title }}</title>

<style>

body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    margin: 0;
    background: #f8f9fa;
}

/* ---------------- Header ---------------- */

header {
    background: #0b2e59;
    color: white;
    padding: 30px 40px;
}

header h1 { margin: 0; font-size: 2.2rem; }
header p  { margin: 6px 0; font-size: 1rem; }

/* ---------------- Sidebar TOC ---------------- */

.sidebar {
    position: fixed;
    right: 0;
    top: 0;
    width: 260px;
    height: 100%;
    overflow-y: auto;
    background: #eef3f7;
    border-left: 1px solid #c0c7ce;
    padding: 20px;
}

.sidebar h2 {
    margin-top: 0;
    font-size: 1.3rem;
    color: #0b2e59;
}

.sidebar ul {
    list-style: none;
    padding-left: 0;
}

.sidebar ul ul {
    margin-left: 15px;
    padding-left: 10px;
    border-left: 2px solid #c0c7ce;
}

.sidebar ul ul li a {
    font-size: 0.95rem;
}

.sidebar a { text-decoration: none; color: #003d9e; }

/* ---------------- Main container ---------------- */

.container {
    margin-right: 300px;
    padding: 40px;
    max-width: 1000px;
    background: white;
}

h2, h3 { color: #0b2e59; }

h2 {
    margin-top: 50px;
    border-bottom: 2px solid #0b2e59;
    padding-bottom: 8px;
}

/* ---------------- Term blocks ---------------- */

.term-block {
    margin-bottom: 40px;
    padding: 20px;
    background: #f1f4f7;
    border-left: 4px solid #0b2e59;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th {
    background: #e9ecef;
    width: 180px;
    padding: 8px;
}

td {
    padding: 8px;
    border-bottom: 1px solid #cbd3da;
}

</style>
</head>

<body>

<header id="top">
    <h1>{{ scheme_title }}</h1>
    <p><strong>Description:</strong> {{ scheme_desc }}</p>
    <p><strong>Version:</strong> {{ version }}</p>
    <p><strong>Creators:</strong> {{ creators }}</p>
    <p><strong>Contributors:</strong> {{ contributors }}</p>
    <p><strong>Created:</strong> {{ created }}</p>
    <p><strong>Last modified:</strong> {{ modified }}</p>
</header>


<!-- ---------------- Sidebar ---------------- -->

<div class="sidebar">
    <h2>Contents</h2>
    <ul>
        <li><a href="#intro">1 Introduction</a></li>
        <li><a href="#namespaces">1.1 Namespaces</a></li>

        <li>
            <a href="#classes">2 List of terms</a>
            <ul class="toc-sub">
                {% for cls in classes %}
                    <li><a href="#class-{{ cls.id }}">{{ cls.label }}</a></li>
                {% endfor %}
            </ul>
        </li>

        <li><a href="#vocabulary">3 Vocabulary</a></li>
        <ul>
            <li><a href="#vocab-classes">3.1 Classes</a></li>
            <li><a href="#vocab-concepts">3.2 Concepts</a></li>
        </ul>
    </ul>
</div>


<!-- ---------------- Main Content ---------------- -->

<div class="container">

    <!-- Introduction -->
    <h2 id="intro">1. Introduction</h2>
    <p>This section will contain a general description of the vocabulary.</p>

    <h3 id="namespaces">1.1 Namespaces</h3>
    <ul>
        {% for prefix, ns in namespaces.items() %}
            <li><strong>{{ prefix }}:</strong> {{ ns }}</li>
        {% endfor %}
    </ul>

    <!-- Classes -->
    <h2 id="classes">2. List of terms</h2>

    {% for cls in classes %}
        <h3 id="class-{{ cls.id }}">{{ cls.label }}</h3>

        {% if cls.concepts %}
            <p>
            {% for term in cls.concepts %}
                <a href="#term-{{ term.id }}">{{ term.label }}</a>
                (drf:{{ term.id }})
                {% if not loop.last %} | {% endif %}
            {% endfor %}
            </p>
        {% else %}
            <p><em>No terms listed for this class.</em></p>
        {% endif %}
    {% endfor %}

    <!-- Vocabulary -->
    <h2 id="vocabulary">3 Vocabulary</h2>

    <!-- ============================ -->
    <!-- 3.1 CLASSES -->
    <!-- ============================ -->
    
    <h3 id="vocabulary-classes">3.1 Classes</h3>
    
    {% for cl in vocabulary_classes %}
    <div class="term-block" id="vclass-{{ cl.id }}">
        <h3>{{ cl.label }} (drf:{{ cl.id }})</h3>
    
        <table>
            <tr>
                <th>URI</th>
                <td>
                    <a href="{{ cl.uri }}" target="_blank">{{ cl.uri }}</a>
                    <button onclick="copyToClipboard('{{ cl.uri }}')">Copy URI</button>
                </td>
            </tr>
            <tr>
                <th>Definition</th>
                <td>{{ cl.definition }}</td>
            </tr>
            <tr>
                <th>DwC term match</th>
                <td>
                    {% if cl.match != "-" %}
                        <a href="{{ cl.match }}" target="_blank">{{ cl.match }}</a>
                    {% else %}-{% endif %}
                </td>
            </tr>
        </table>
    </div>
    {% endfor %}
    
    <!-- ============================ -->
    <!-- 3.2 CONCEPTS -->
    <!-- ============================ -->
    
    <h3 id="vocabulary-concepts">3.2 Concepts</h3>
    
    {% for t in vocabulary_concepts %}
    <div class="term-block" id="term-{{ t.id }}">
        <h3>{{ t.label }} (drf:{{ t.id }})</h3>
    
        {% if t.breadcrumbs %}
            <p><strong>Paths:</strong><br>
            {% for bc in t.breadcrumbs %}
                {{ bc | safe }}<br>
            {% endfor %}
            </p>
        {% endif %}
    
        <table>
            <tr>
                <th>URI</th>
                <td>
                    <a href="{{ t.uri }}" target="_blank">{{ t.uri }}</a>
                    <button onclick="copyToClipboard('{{ t.uri }}')">Copy URI</button>
                </td>
            </tr>
    
            <tr><th>Definition</th><td>{{ t.definition }}</td></tr>
    
            <tr>
                <th>Example</th>
                <td>
                    {% if t.example != "-" %}
                        <pre>{{ t.example }}</pre>
                    {% else %}-{% endif %}
                </td>
            </tr>
    
            <tr>
                <th>Unit</th>
                <td>
                    {% if t.unit != "-" %}
                        <a href="{{ t.unit }}" target="_blank">{{ t.unit }}</a>
                    {% else %}-{% endif %}
                </td>
            </tr>
    
            <tr>
                <th>Broader</th>
                <td>
                    {% if t.broaders %}
                        {% for b in t.broaders %}
                            <a href="{{ b.anchor }}">{{ b.id }}</a>
                            {% if not loop.last %} | {% endif %}
                        {% endfor %}
                    {% else %}
                        -
                    {% endif %}
                </td>
            </tr>
    
            <tr><th>Created</th><td>{{ t.creat }}</td></tr>
            <tr><th>Modified</th><td>{{ t.modif }}</td></tr>
    
            <tr>
                <th>DwC match</th>
                <td>
                    {% if t.match != "-" %}
                        <a href="{{ t.match }}" target="_blank">{{ t.match }}</a>
                    {% else %}-{% endif %}
                </td>
            </tr>
    
        </table>
    
        <p><a href="#top">â†‘ back to top</a></p>
    </div>
    {% endfor %}

</div>
<script>
function copyToClipboard(text) {
    navigator.clipboard.writeText(text);
    alert("Copied: " + text);
}
</script>
</body>
</html>
